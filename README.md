Шаг 1. Подготовьте железо
Подключите компоненты к RPi (примерные пины):

Ультразвуковой датчик (HC‑SR04):
VCC → 5V на RPi;
GND → GND на RPi;
Trig → пин 23;
Echo → пин 24.

Мотор через драйвер (например, L298N):
вход 1 → пин 12;
вход 2 → пин 13.

Сервопривод (SG90):
красный (питание) → 5V;
коричневый (земля) → GND;
оранжевый (сигнал) → пин 17.

Важно! Моторы чаще всего подключают через драйвер (не напрямую к RPi), чтобы не сжечь плату.

Шаг 2. Установите ПО
На RPi откройте терминал и выполните:

bash
sudo apt update
sudo apt install python3-pip
pip install RPi.GPIO
Это установит библиотеку для работы с GPIO.

Шаг 3. Структура файлов (что где лежит)
robot_project/
├── main.py                  # точка входа (запуск)
├── robot/
│   ├── gpio_manager.py    # инициализация и работа с GPIO
│   ├── sensors.py         # чтение датчиков (через GPIO)
│   ├── actuators.py      # управление моторами/сервами (через GPIO)
│   ├── navigation.py       # логика движения
│   └── config.py           # настройки (пины, пороги, коэффициенты)
├── utils/
│   ├── logging.py          # логирование
│   ├── cli.py            # интерфейс управления через терминал
│   └── helpers.py          # вспомогательные функции
├── .gitignore
├── README.md
└── requirements.txt

Шаг 4. Разбираем код по частям

a) robot/gpio_manager.py — «драйвер» для пинов
Что делает:
говорит RPi, какие пины будут входами (датчик), а какие — выходами (моторы, серва).
Зачем это нужно:
Без этой настройки RPi не «знает», что делать с пинами.

b) robot/sensors.py — датчик расстояния
Что делает:
посылает звуковой импульс;
ждёт отражения;
считает расстояние в сантиметрах.
Как проверить:
Запустите отдельно этот код и поднесите руку к датчику — он выведет расстояние в см.

c) robot/actuators.py — моторы и серва
Мотор (с PWM)
Что делает:
меняет скорость вращения через сигнал PWM (широтно‑импульсная модуляция).
Важно:
Для движения назад нужен H‑мост (специальная микросхема), иначе мотор не развернётся.

Сервопривод
Что делает:
поворачивает вал на заданный угол (0–180°).

d) robot/navigation.py — логика движения
Что делает:
если впереди препятствие — останавливается и разворачивается;
если свободно — едет вперёд.

e) utils/cli.py — меню в терминале
Что делает:
Показывает список команд, чтобы управлять роботом с клавиатуры.



Точка входа в вашем проекте — файл main.py в корневой папке проекта.

Это единственный файл, который вы запускаете вручную. Он «запускает» всю систему: подключает остальные модули, инициализирует компоненты робота и начинает выполнение основной логики.

Почему именно main.py?
Централизованное управление
Всё стартует из одного места — не нужно запускать десятки скриптов.

Порядок инициализации
Сначала настраиваются пины GPIO, потом датчики, потом актуаторы, потом логика.

Удобный интерфейс
Здесь же обычно размещают главный цикл с меню для ручного управления.

Что делает main.py (по шагам)
Импортирует классы из других модулей:
Создаёт и настраивает компоненты:
Запускает главный цикл (меню управления):
Очищает ресурсы при завершении:

Как запустить
Откройте терминал на Raspberry Pi.
Перейдите в папку проекта:
bash
cd /путь/к/robot_project
Запустите скрипт:
bash
python main.py
В терминале появится меню с командами — управляйте роботом с клавиатуры.

Важные нюансы
Права доступа
Для работы с GPIO может потребоваться запуск от имени суперпользователя:
bash
sudo python main.py
Закрытие программы
Всегда завершайте через команду q (quit), чтобы gpio.cleanup() корректно отключил пины.
Ошибки импорта
Убедитесь, что все файлы лежат в правильных папках (например, robot/gpio_manager.py).
Итог:
Точка входа — main.py.
Запускаете только его.
Всё остальное подключается автоматически.



Перед работой активируйте venv:
bash
source venv/bin/activate
В терминале появится префикс (venv) — значит, среда активна.

Установка зависимостей
Установите нужные пакеты внутри venv:
bash
pip install RPi.GPIO

Затем сохраните список зависимостей:
bash
pip freeze > requirements.txt

Теперь в requirements.txt будет список всех пакетов — его можно использовать для развёртывания на другом устройстве.

Выход из venv
Когда закончите работу:
bash
deactivate

robot_project/
├── venv/                # виртуальная среда (не трогайте вручную)
├── main.py
├── robot/
│   ├── gpio_manager.py
│   ├── sensors.py
│   └── ...
├── utils/
├── requirements.txt      # список зависимостей
├── .gitignore
└── README.md